@tailwind base;
@tailwind components;
@tailwind utilities;

:root { color-scheme: dark; }
body { @apply bg-[#0b0d16] text-slate-100; }

/* --- Global Focus Visibility (a11y) --- */
button:focus-visible,
.lcars-btn:focus-visible,
.lcars-cta:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
	outline: 2px solid #ffcc66; /* LCARS amber */
	outline-offset: 2px;
}

/* Higher contrast fallback for very dark backgrounds */
@media (forced-colors: active) {
	button:focus-visible,
	.lcars-btn:focus-visible,
	.lcars-cta:focus-visible,
	input:focus-visible,
	select:focus-visible,
	textarea:focus-visible { outline: 2px solid CanvasText; }
}

/* --- LCARS helpers --- */
.lcars-card { @apply rounded-2xl p-0 border border-slate-700 bg-[#101425] overflow-hidden relative; }
.lcars-rail { position:absolute; left:0; top:0; bottom:0; width:10px; background:#ff9966; }
.lcars-rail-alt { background:#66ccff; }
.lcars-rail-accent { background:#ff6699; }
.lcars-body { @apply pl-4 md:pl-6 pr-4 py-4; margin-left:10px; }
.lcars-label { @apply block text-xs uppercase tracking-widest text-slate-400 mb-1; }
.lcars-small { @apply text-xs text-slate-300; }
.lcars-input { @apply bg-slate-900 rounded-md px-3 py-2 text-sm border border-slate-700; }
.lcars-btn { @apply px-2 py-1 rounded-md bg-slate-800 hover:bg-slate-700 border border-slate-700 text-sm; }
.lcars-btn-locked { @apply bg-amber-600 hover:bg-amber-500; }
.lcars-cta { @apply bg-amber-500 hover:bg-amber-400 text-black font-semibold px-3 py-2 rounded-xl; }

/* --- LCARS control accents (checkboxes, toggles, sliders) --- */
/* Use accessible, bright LCARS palette instead of red */
input[type="checkbox"] {
	accent-color: #ffcc66; /* LCARS amber */
}
input[type="checkbox"]:disabled { accent-color: #a3a3a3; }

/* Range slider (WebKit) */
input[type="range"] {
	appearance: none;
	-webkit-appearance: none;
	width: 100%;
	height: 0.375rem; /* 6px track */
	background: linear-gradient(90deg, #2b314a, #2b314a);
	border-radius: 9999px;
}
input[type="range"]::-webkit-slider-runnable-track {
	height: 0.375rem;
	background: linear-gradient(90deg, #2b314a, #2b314a);
	border-radius: 9999px;
}
input[type="range"]::-webkit-slider-thumb {
	appearance: none;
	-webkit-appearance: none;
	width: 1rem; height: 1rem;
	background: #66ccff; /* LCARS blue accent */
	border: 2px solid #0b0d16;
	border-radius: 9999px;
	margin-top: -0.3125rem; /* center on 6px track */
	box-shadow: 0 0 0 1px #1f2937; /* subtle outline */
}

/* Range slider (Firefox) */
input[type="range"]::-moz-range-track {
	height: 0.375rem;
	background: #2b314a;
	border-radius: 9999px;
}
input[type="range"]::-moz-range-thumb {
	width: 1rem; height: 1rem;
	background: #66ccff;
	border: 2px solid #0b0d16;
	border-radius: 9999px;
	box-shadow: 0 0 0 1px #1f2937;
}

/* High-contrast hover/active states for better visibility */
input[type="range"]:hover::-webkit-slider-thumb { background: #ff9966; }
input[type="range"]:active::-webkit-slider-thumb { background: #ff6699; }
input[type="range"]:hover::-moz-range-thumb { background: #ff9966; }
input[type="range"]:active::-moz-range-thumb { background: #ff6699; }

/* --- Preview Zoom (restored) --- */
.report-zoom { /* text content scales via transform; charts counter-scale */
	--zoom: 1;
	transform-origin: top left;
	transform: scale(var(--zoom));
	width: calc(100% / var(--zoom));
}

/* Inverse scale wrapper for charts to keep visual size stable */
/* Chart wrapper: inverse scale so charts (and their figure container) do NOT zoom */
.chart-no-zoom {
	transform-origin: top left;
	transform: scale(calc(1 / var(--zoom)));
	width: calc(100% * var(--zoom));
	display: block;
	max-width: none;
	overflow: visible;
}

/* Keep zoom / chart size / density controls stable */
/* Controls fixed-size: remove inverse scaling so they do not shrink */
.controls-no-zoom {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 0.5rem;
}

@media (prefers-reduced-motion: reduce) { .report-zoom { transition: none; } }

@media print {
	.report-zoom { transform: none !important; width: 100% !important; }
	.chart-no-zoom { transform: none !important; width: 100% !important; }
}

/* --- Compact Density (restored) --- */
.density-compact .lcars-btn { padding: 0.25rem 0.5rem; font-size: 0.75rem; }
.density-compact .lcars-input { padding: 0.375rem 0.5rem; font-size: 0.8125rem; }
.density-compact .lcars-body { padding-top: 0.5rem; padding-bottom: 0.5rem; padding-left: 1rem; padding-right: 1rem; }
.density-compact #button-bar button { padding: 0.375rem 0.625rem; }
.density-compact #button-bar { padding: 0.5rem 0.75rem; gap: 0.5rem; }
.density-compact input[type="range"] { height: 0.25rem; }
.density-compact input[type="range"]::-webkit-slider-runnable-track { height: 0.25rem; }
.density-compact input[type="range"]::-webkit-slider-thumb { width: 0.75rem; height: 0.75rem; margin-top: -0.25rem; }
.density-compact input[type="range"]::-moz-range-track { height: 0.25rem; }
.density-compact input[type="range"]::-moz-range-thumb { width: 0.75rem; height: 0.75rem; }
.density-compact #printable-report .text-xl { font-size: 1.1rem; }
.density-compact #printable-report .text-lg { font-size: 0.95rem; }
.density-compact #printable-report .text-base { font-size: 0.9rem; }
.density-compact #printable-report .text-sm { font-size: 0.8125rem; }
.density-compact #printable-report .leading-relaxed { line-height: 1.4; }

/* Compact tweaks for Crew Manifest panel */
.density-compact .crew-toolbar .lcars-btn { padding: 0.25rem 0.5rem; font-size: 0.75rem; }
.density-compact .crew-toolbar input[type="number"],
.density-compact .crew-toolbar input[type="text"] { padding: 0.25rem 0.5rem; font-size: 0.8125rem; }
.density-compact .crew-role-btn { font-size: 0.75rem; padding: 0.25rem 0.375rem; }

/* Improve touch DnD behavior on mobile lists */
.overscroll-contain { overscroll-behavior: contain; }
.touch-none { touch-action: none; }
